for (f in filelist){
MRI_faces=rbind(MRI_faces,read.table(f,header=T,na.strings=c(999,999000)))
}
MRI_faces$PairType2[MRI_faces$PairType==1]="High_Value"
MRI_faces$PairType2[MRI_faces$PairType==2]="Low_Value"
MRI_faces$PairType2[MRI_faces$PairType==4]="Sanity"
tapply(MRI_faces$Outcome,MRI_faces$PairType2,mean,na.rm=T)
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
HV=summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
LV=summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
HV_CI=c(HV$coefficients[1]-1.96*HV$coefficients[2],HV$coefficients[1]+1.96*HV$coefficients[2]) # HV Confidence interval (in log odds)
LV_CI=c(LV$coefficients[1]-1.96*LV$coefficients[2],LV$coefficients[1]+1.96*LV$coefficients[2]) # LV Confidence interval (in log odds)
exp(HV_CI)/(1+exp(HV_CI)) # HV Confidence interval (in proportions)
exp(LV_CI)/(1+exp(LV_CI)) # LV Confidence interval (in proportions)
summary(glmer(Outcome ~ 1 + PairType + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
library(lme4)
rm(list=ls())
## Original Sample
#For iMac
path="~/Dropbox/Experiment_Israel/Codes/MRI_faces/Output/"
## For PC
#path="C:/Users/Tom/Dropbox/Experiment_Israel/Codes/MRI_faces/Output/"
subjects=c(101:102,104:114,116:117,119:125,127:144); # Define here your subjects' codes.
subjects=c(102,104:114,116:117,119:125,127:141,143:149); # 43 valid subjects
# exclude:
# 103 was too tired during probe and training.
# 115 - bad MRI
# 118 - moved a lot during scans, requested to stop 3 times at training
# said he was not concentratred.
# 126 - bad MRI
# 132 - fell asleep
## Followup
#For iMac
#path="~/Dropbox/Experiment_Israel/Codes/MRI_faces/Output/followup/"
# For PC
#path="C:/Users/Tom/Dropbox/Experiment_Israel/Codes/MRI_faces/Output/followup/"
#subjects=c(102,104:105,107:108,110:112,114,117,120:123,127,129:136,138:140); # Define here your subjects' codes.
filelist=c()
for (s in subjects){
filelist=c(filelist,Sys.glob(paste(path, "MRI_faces_",s,"_probe_block*.txt",sep="")))
}
MRI_faces=c()
for (f in filelist){
MRI_faces=rbind(MRI_faces,read.table(f,header=T,na.strings=c(999,999000)))
}
MRI_faces$PairType2[MRI_faces$PairType==1]="High_Value"
MRI_faces$PairType2[MRI_faces$PairType==2]="Low_Value"
MRI_faces$PairType2[MRI_faces$PairType==4]="Sanity"
tapply(MRI_faces$Outcome,MRI_faces$PairType2,mean,na.rm=T)
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
HV=summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
LV=summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
HV_CI=c(HV$coefficients[1]-1.96*HV$coefficients[2],HV$coefficients[1]+1.96*HV$coefficients[2]) # HV Confidence interval (in log odds)
LV_CI=c(LV$coefficients[1]-1.96*LV$coefficients[2],LV$coefficients[1]+1.96*LV$coefficients[2]) # LV Confidence interval (in log odds)
exp(HV_CI)/(1+exp(HV_CI)) # HV Confidence interval (in proportions)
exp(LV_CI)/(1+exp(LV_CI)) # LV Confidence interval (in proportions)
summary(glmer(Outcome ~ 1 + PairType + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
library(lme4)
rm(list=ls())
## Original Sample
#For iMac
path="~/Dropbox/Experiment_Israel/Codes/MRI_faces/Output/"
## For PC
#path="C:/Users/Tom/Dropbox/Experiment_Israel/Codes/MRI_faces/Output/"
subjects=c(101:102,104:114,116:117,119:125,127:144); # Define here your subjects' codes.
subjects=c(102,104:114,116:117,119:125,127:141,143:149); # 43 valid subjects
# exclude:
# 103 was too tired during probe and training.
# 115 - bad MRI
# 118 - moved a lot during scans, requested to stop 3 times at training
# said he was not concentratred.
# 126 - bad MRI
# 132 - fell asleep
## Followup
#For iMac
path="~/Dropbox/Experiment_Israel/Codes/MRI_faces/Output/followup/"
# For PC
#path="C:/Users/Tom/Dropbox/Experiment_Israel/Codes/MRI_faces/Output/followup/"
#subjects=c(102,104:105,107:108,110:112,114,117,120:123,127,129:136,138:140); # Define here your subjects' codes.
filelist=c()
for (s in subjects){
filelist=c(filelist,Sys.glob(paste(path, "MRI_faces_",s,"_probe_block*.txt",sep="")))
}
MRI_faces=c()
for (f in filelist){
MRI_faces=rbind(MRI_faces,read.table(f,header=T,na.strings=c(999,999000)))
}
MRI_faces$PairType2[MRI_faces$PairType==1]="High_Value"
MRI_faces$PairType2[MRI_faces$PairType==2]="Low_Value"
MRI_faces$PairType2[MRI_faces$PairType==4]="Sanity"
tapply(MRI_faces$Outcome,MRI_faces$PairType2,mean,na.rm=T)
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
HV=summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
LV=summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
HV_CI=c(HV$coefficients[1]-1.96*HV$coefficients[2],HV$coefficients[1]+1.96*HV$coefficients[2]) # HV Confidence interval (in log odds)
LV_CI=c(LV$coefficients[1]-1.96*LV$coefficients[2],LV$coefficients[1]+1.96*LV$coefficients[2]) # LV Confidence interval (in log odds)
exp(HV_CI)/(1+exp(HV_CI)) # HV Confidence interval (in proportions)
exp(LV_CI)/(1+exp(LV_CI)) # LV Confidence interval (in proportions)
summary(glmer(Outcome ~ 1 + PairType + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
library(lme4)
rm(list=ls())
## Followup
#For iMac
path="~/Drive/Experiment_Israel/Codes/MRI_faces/Output/followup/"
subjects=c(102,104:105,107:108,110:112,114,117,120:123,127,129:136,138:140); # Define here your subjects' codes.
subjects=c(102,104:105,108,110:112,114,117,120:123,127,129:131,133:136,138:140,144); # Define here your subjects' codes.
filelist=c()
for (s in subjects){
filelist=c(filelist,Sys.glob(paste(path, "MRI_faces_",s,"_probe_block*.txt",sep="")))
}
MRI_faces=c()
for (f in filelist){
MRI_faces=rbind(MRI_faces,read.table(f,header=T,na.strings=c(999,999000)))
}
MRI_faces$PairType2[MRI_faces$PairType==1]="High_Value"
MRI_faces$PairType2[MRI_faces$PairType==2]="Low_Value"
3800/25
tapply(MRI_faces$Outcome,MRI_faces$PairType2,mean,na.rm=T)
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
HV=summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
LV=summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
HV_CI=c(HV$coefficients[1]-1.96*HV$coefficients[2],HV$coefficients[1]+1.96*HV$coefficients[2]) # HV Confidence interval (in log odds)
LV_CI=c(LV$coefficients[1]-1.96*LV$coefficients[2],LV$coefficients[1]+1.96*LV$coefficients[2]) # LV Confidence interval (in log odds)
exp(HV_CI)/(1+exp(HV_CI)) # HV Confidence interval (in proportions)
exp(LV_CI)/(1+exp(LV_CI)) # LV Confidence interval (in proportions)
summary(glmer(Outcome ~ 1 + PairType + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + PairType + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
summary(glmer(Outcome ~ 1 + PairType + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
options(warn=-1)
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
HV=summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
LV=summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
HV_CI=c(HV$coefficients[1]-1.96*HV$coefficients[2],HV$coefficients[1]+1.96*HV$coefficients[2]) # HV Confidence interval (in log odds)
LV_CI=c(LV$coefficients[1]-1.96*LV$coefficients[2],LV$coefficients[1]+1.96*LV$coefficients[2]) # LV Confidence interval (in log odds)
exp(HV_CI)/(1+exp(HV_CI)) # HV Confidence interval (in proportions)
exp(LV_CI)/(1+exp(LV_CI)) # LV Confidence interval (in proportions)
summary(glmer(Outcome ~ 1 + PairType + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
tapply(MRI_faces$Outcome,MRI_faces$PairType2,mean,na.rm=T)
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
tapply(MRI_faces$Outcome,MRI_faces$PairType2,mean,na.rm=T)
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
summary(glmer(Outcome ~ 1 + PairType + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
# subjects=c(101:102,104:114,116:117,119:125,127:144); # Define here your subjects' codes.
subjects=c(102,104:114,116:117,119:125,127:141,143:149); # 43 valid subjects
# subjects=c(102,104:105,107:108,110:112,114,117,120:123,127,129:136,138:140); # Define here your subjects' codes.
subjects=c(102,104:105,108,110:112,114,117,120:123,127,129:131,133:136,138:140,144); # Define here your subjects' codes.
# subjects=c(101:102,104:114,116:117,119:125,127:144); # Define here your subjects' codes.
subjects=c(102,104:114,116:117,119:125,127:141,143:149); # 43 valid subjects
library(lme4)
library(lme4)
library(reshape)
library(ggplot2)
rm(list=ls())
## Original Sample
#For iMac
path="~/Drive/Experiment_Israel/Codes/Boost_IAPS_generalization_II/Output/"
subjects=c(102:106,108:119,121:150,152:166,168:175,178:185,189,193); # Define here your subjects' codes.
filelist=c()
for (s in subjects){
filelist=c(filelist,Sys.glob(paste(path, "*",s,"_probe_generalization_*.txt",sep="")))
}
Data=c()
Data2=c()
for (f in filelist){
Data=rbind(Data,read.table(f,header=T,na.strings=c(999,999000)))
}
Data2=Data
Data$Outcome=Data$FirstOutcome
Data$FirstOrSecond=1
Data2$FirstOrSecond=2
Results=rbind(Data,Data2)
Results$SubNumeric=as.numeric(gsub("[^0-9]", "",Results$subjectID))
Results$Order=as.factor(2-Results$SubNumeric%%2)
Results$FirstOrSecond=factor(Results$FirstOrSecond,levels = c(1,2),labels = c("Baseline","PostTraining"))
Results$PairType=Results$PairType.1.Training.2.Generalization.
Results$Outcome[Results$Outcome>1]=NA
Results$StimuliSet = factor(Results$PairType,levels = c(1,2),labels = c("Training","Generalization"))
# Results$StimuliSet[Results$PairType==1]="Training"
# Results$StimuliSet[Results$PairType==2]="Generalization"
Results$PairType=as.factor(Results$PairType)
Results$Group=factor(Results$Order,levels = c(1,2),labels = c("HighArousal","LowArousal"))
Results$ImageLeft_num = as.numeric(Results$ImageLeft)
Results$ImageRight_num = as.numeric(Results$ImageRight)
Results$PairID = 100*apply(Results[,c('ImageLeft_num','ImageRight_num')],1,max) + apply(Results[,c('ImageLeft_num','ImageRight_num')],1,min)
Results$PairID2 = Results$PairID + Results$SubNumeric*1000000
Results$PairID =as.factor(Results$PairID )
Results$PairID2= as.factor(Results$PairID2 )
tapply(Results$Outcome,Results$FirstOrSecond,mean,na.rm=T)
with(Results, tapply(Outcome, list(StimuliSet=StimuliSet,FirstOrSecond=FirstOrSecond), mean,na.rm=T) )
with(Results, tapply(Outcome, list(StimuliSet=StimuliSet,FirstOrSecond=FirstOrSecond, Group=Group), mean,na.rm=T) )
with(Results, tapply(Outcome, list(subjectID=subjectID,StimuliSet=StimuliSet,FirstOrSecond=FirstOrSecond), mean,na.rm=T) )
# 3 way interaction
summary(glmer(Outcome ~ 1 + FirstOrSecond*PairType*Group + (1|subjectID),data=Results,na.action=na.omit,family=binomial))
# 2 way interaction - by group
summary(glmer(Outcome ~ 1 + FirstOrSecond*PairType + (1|subjectID),data=subset(Results,(Results$Group==1)),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + FirstOrSecond*PairType + (1|subjectID),data=subset(Results,(Results$Group==2)),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + FirstOrSecond + (1|subjectID),data=subset(Results,(Results$StimuliSet=='Training')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + FirstOrSecond + (1|subjectID),data=subset(Results,(Results$StimuliSet=='Generalization')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + Group + FirstOrSecond + (1|subjectID),data=subset(Results,(Results$StimuliSet=='Training')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + Group + FirstOrSecond + (1|subjectID),data=subset(Results,(Results$StimuliSet=='Generalization')),na.action=na.omit,family=binomial))
# Simple Effects
model1 = summary(glmer(Outcome ~ 1 + FirstOrSecond + (1|subjectID),data=subset(Results,(Results$StimuliSet=='Training'&Order==1)),na.action=na.omit,family=binomial))
model2 = summary(glmer(Outcome ~ 1 + FirstOrSecond + (1|subjectID),data=subset(Results,(Results$StimuliSet=='Generalization'&Order==1)),na.action=na.omit,family=binomial))
model3 = summary(glmer(Outcome ~ 1 + FirstOrSecond + (1|subjectID),data=subset(Results,(Results$StimuliSet=='Training'&Order==2)),na.action=na.omit,family=binomial))
model4 = summary(glmer(Outcome ~ 1 + FirstOrSecond + (1|subjectID),data=subset(Results,(Results$StimuliSet=='Generalization'&Order==2)),na.action=na.omit,family=binomial))
plot_df = aggregate(data=Results,Outcome ~ StimuliSet + Group + FirstOrSecond, function(x) mean(x))
plot_df
with(Results, tapply(Outcome, list(subjectID=subjectID,StimuliSet=StimuliSet,FirstOrSecond=FirstOrSecond), mean,na.rm=T) )
a=with(Results, tapply(Outcome, list(subjectID=subjectID,StimuliSet=StimuliSet,FirstOrSecond=FirstOrSecond), mean,na.rm=T) )
a=as.data.frame(a)
a
colMeans(a)
View(a)
writeClipboard(a)
clip <- pipe("pbcopy", "w")
write.table(a, file=clip)
close(clip)
library(lme4)
rm(list=ls())
library(lme4)
library("rstudioapi")
rm(list=ls())
pwd=rstudioapi::getActiveDocumentContext()$path
pwd
d=rstudioapi::getActiveDocumentContext()
View(d)
a=getActiveDocumentContext()$path
pathSplit=strsplit(pwd, "/")
pathSplit
pathSplit=pathSplit[[1]]
pathSplit
length(pathSplit)
data_path=paste0(pathSplit[1:(length(pathSplit)-2)],'/',collapse="")
data_path
data_path=paste0(pathSplit[1:(length(pathSplit)-2)],'/')
data_path
data_path=paste0(pathSplit[1:(length(pathSplit)-2)],'/',collapse="")
data_path
pwd = function(){
curr_path = rstudioapi::getActiveDocumentContext()$path
pathSplit=strsplit(curr_path, "/")
pathSplit=pathSplit[[1]]
data_path=paste0(pathSplit[1:(length(pathSplit)-1)],'/',collapse="")
}
pwd
a=pwd()
a=pwd()
pwd = function(){
curr_path = rstudioapi::getActiveDocumentContext()$path
pathSplit=strsplit(curr_path, "/")
pathSplit=pathSplit[[1]]
data_path=paste0(pathSplit[1:(length(pathSplit)-1)],'/',collapse="")
return(data_path)
}
pwd
a=pwd
a
a=pwd()
a=pwd(1)
pwd = function(){
curr_path = rstudioapi::getActiveDocumentContext()$path
pathSplit=strsplit(curr_path, "/")
pathSplit=pathSplit[[1]]
data_path=paste0(pathSplit[1:(length(pathSplit)-1)],'/',collapse="")
return(data_path)
}
pwd()
pwd = function(input){
curr_path = rstudioapi::getActiveDocumentContext()$path
pathSplit=strsplit(curr_path, "/")
pathSplit=pathSplit[[1]]
data_path=paste0(pathSplit[1:(length(pathSplit)-1)],'/',collapse="")
return(data_path)
}
pwd()
curr_path = rstudioapi::getActiveDocumentContext()$path
pathSplit=strsplit(curr_path, "/")
pathSplit=pathSplit[[1]]
data_path=paste0(pathSplit[1:(length(pathSplit)-1)],'/',collapse="")
data_path
pwd = function(input){
input=1
curr_path = rstudioapi::getActiveDocumentContext()$path
pathSplit=strsplit(curr_path, "/")
pathSplit=pathSplit[[1]]
data_path=paste0(pathSplit[1:(length(pathSplit)-1)],'/',collapse="")
return(data_path)
}
pwd=rstudioapi::getActiveDocumentContext()$path
pwd
pwd = function(input){
input=1
curr_path = rstudioapi::getActiveDocumentContext()$path
pathSplit=strsplit(curr_path, "/")
pathSplit=pathSplit[[1]]
data_path=paste0(pathSplit[1:(length(pathSplit)-1)],'/',collapse="")
return(data_path)
}
pwd
pwd()
pwd = function(){
a=1
return(a)
}
pwd
pwd()
pwd = function(){
a=rstudioapi::getActiveDocumentContext()$path
return(a)
}
pwd()
pwd = function(){
library("rstudioapi")
a=rstudioapi::getActiveDocumentContext()$path
return(a)
}
pwd()
rstudioapi::getActiveDocumentContext()$path
rstudioapi::getActiveDocumentContext()$path
pwd = function(){
library("rstudioapi")
a=rstudioapi::getActiveDocumentContext()$path
return(a)
}
pwd()
a=paste("02" rstudioapi::getActiveDocumentContext()$path)
pwd = function(){
library("rstudioapi")
a=paste("02" rstudioapi::getActiveDocumentContext()$path))
return(a)
}
pwd = function(){
library("rstudioapi")
a=paste("02" rstudioapi::getActiveDocumentContext()$path))
return(a)
}
curr_path = rstudioapi::getActiveDocumentContext()$path
pathSplit=strsplit(curr_path, "/")
pathSplit=pathSplit[[1]]
data_path=paste0(pathSplit[1:(length(pathSplit)-1)],'/',collapse="")
data_path
pwd = function(){
library("rstudioapi")
a=paste("02", rstudioapi::getActiveDocumentContext()$path)
return(a)
}
pwd()
pwd()
rstudioapi::getActiveDocumentContext()$path
pwd = function(){
library("rstudioapi")
a=paste("02", rstudioapi::getActiveDocumentContext()$path)
a=rstudioapi::getActiveDocumentContext()$path
return(a)
}
pwd()
curr_path = rstudioapi::getActiveDocumentContext()$path
pathSplit=strsplit(curr_path, "/")
pathSplit=pathSplit[[1]]
data_path=paste0(pathSplit[1:(length(pathSplit)-1)],'/',collapse="")
data_path
library(lme4)
library("rstudioapi")
rm(list=ls())
curr_path = rstudioapi::getActiveDocumentContext()$path
pathSplit=strsplit(curr_path, "/")
pathSplit=pathSplit[[1]]
data_path=paste0(pathSplit[1:(length(pathSplit)-1)],'/',collapse="")
data_path
pathSplit
data_path
curr_path
script_path = rstudioapi::getActiveDocumentContext()$path
pathSplit=strsplit(script_path, "/")
pathSplit=pathSplit[[1]]
data_path=paste0(pathSplit[1:(length(pathSplit)-1)],'/',collapse="")
data_path=paste0(pathSplit[1:(length(pathSplit)-1)],'/',collapse="")
data_path
data_path=paste0(pathSplit[1:(length(pathSplit)-2)],'/',collapse="")
data_path
pathSplit
data_path=paste0(pathSplit[1:(length(pathSplit)-2)],"/",collapse="")
data_path
data_path=paste0(pathSplit[1:(length(pathSplit)-2)],"/")
data_path
data_path=paste0(pathSplit[1:(length(pathSplit)-2)],"/",collapse="")
data_path
pwd=paste0(pathSplit[1:(length(pathSplit)-2)],"/",collapse="")
pwd
main_path=paste0(pathSplit[1:(length(pathSplit)-2)],"/",collapse="")
## Followup
#For iMac
path=paste0(main_path,"/../Output/followup/")
path
## Original Sample
path=paste0(main_path,"../Output/")
path
main_path
## Original Sample
path=paste0(main_path,"../Output/")
path
pathSplit
pathSplit=pathSplit[[1]]
pathSplit
# Get current path
script_path = rstudioapi::getActiveDocumentContext()$path
pathSplit=strsplit(script_path, "/")
pathSplit=pathSplit[[1]]
pathSplit
pathSplit=strsplit(script_path, "/")
pathSplit
subjects=c(102,104:114,116:117,119:125,127:141,143:149); # 43 valid subjects
length(subjects)
subjects=c(102,104:105,108,110:112,114,117,120:123,127,129:131,133:136,138:140,144); # Define here your subjects' codes.
pathSplit=strsplit(script_path, "/")
pathSplit=pathSplit[[1]]
pathSplit
pathSplit=strsplit(script_path, "/")
pathSplit[[1]]
pathSplit[[1]][1:2]
pathSplit[[1]][1:-2]
pathSplit[[1]][1:end-2]
pathSplit[[1]][-2]
pathSplit=strsplit(script_path, "/")
pathSplit=pathSplit[[1]][-2]
pathSplit
pathSplit=pathSplit[[1]][:-2]
pathSplit=pathSplit[[1]][-2]
pathSplit
pathSplit=strsplit(script_path, "/")
pathSplit=pathSplit[[1]][-2]
pathSplit
pathSplit=strsplit(script_path, "/")
t=pathSplit[[1]][-2]
t
t=pathSplit[[1]]
t
t=pathSplit[[1]][-end]
# Get current path
script_path = rstudioapi::getActiveDocumentContext()$path
pathSplit=strsplit(script_path, "/")
pathSplit=pathSplit[[1]]
main_path=paste0(pathSplit[1:(length(pathSplit)-2)],"/",collapse="")
## Original Sample
path=paste0(main_path,"../Output/")
subjects=c(102,104:114,116:117,119:125,127:141,143:149); # 43 valid subjects
path
filelist=c()
for (s in subjects){
filelist=c(filelist,Sys.glob(paste(path, "MRI_faces_",s,"_probe_block*.txt",sep="")))
}
MRI_faces=c()
for (f in filelist){
MRI_faces=rbind(MRI_faces,read.table(f,header=T,na.strings=c(999,999000)))
}
filelist
filelist
## Original Sample
path=paste0(main_path,"../Output/")
subjects=c(102,104:114,116:117,119:125,127:141,143:149); # 43 valid subjects
filelist=c()
for (s in subjects){
filelist=c(filelist,Sys.glob(paste(path, "MRI_faces_",s,"_probe_block*.txt",sep="")))
}
paste(path, "MRI_faces_",s,"_probe_block*.txt",sep="")
filelist=c(filelist,Sys.glob(paste(path, "MRI_faces_",s,"_probe_block*.txt",sep="")))
filelist
filelist=c(filelist,Sys.glob(paste(path, "*.txt",sep="")))
filelist
## Original Sample
path=paste0(main_path,"/Output/")
subjects=c(102,104:114,116:117,119:125,127:141,143:149); # 43 valid subjects
## Followup
path=paste0(main_path,"/Output/followup/")
subjects=c(102,104:105,108,110:112,114,117,120:123,127,129:131,133:136,138:140,144); # Define here your subjects' codes.
t
filelist=c()
for (s in subjects){
filelist=c(filelist,Sys.glob(paste(path, "MRI_faces_",s,"_probe_block*.txt",sep="")))
}
filelist
MRI_faces=c()
for (f in filelist){
MRI_faces=rbind(MRI_faces,read.table(f,header=T,na.strings=c(999,999000)))
}
MRI_faces$PairType2[MRI_faces$PairType==1]="High_Value"
MRI_faces$PairType2[MRI_faces$PairType==2]="Low_Value"
MRI_faces$PairType2[MRI_faces$PairType==4]="Sanity"
tapply(MRI_faces$Outcome,MRI_faces$PairType2,mean,na.rm=T)
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
HV=summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='High_Value')),na.action=na.omit,family=binomial))
LV=summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,(MRI_faces$PairType2=='Low_Value')),na.action=na.omit,family=binomial))
HV_CI=c(HV$coefficients[1]-1.96*HV$coefficients[2],HV$coefficients[1]+1.96*HV$coefficients[2]) # HV Confidence interval (in log odds)
LV_CI=c(LV$coefficients[1]-1.96*LV$coefficients[2],LV$coefficients[1]+1.96*LV$coefficients[2]) # LV Confidence interval (in log odds)
exp(HV_CI)/(1+exp(HV_CI)) # HV Confidence interval (in proportions)
exp(LV_CI)/(1+exp(LV_CI)) # LV Confidence interval (in proportions)
summary(glmer(Outcome ~ 1 + PairType + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
summary(glmer(Outcome ~ 1 + (1|subjectID),data=subset(MRI_faces,MRI_faces$PairType %in% c(1,2)),na.action=na.omit,family=binomial)) #effect of Go choice for HH vs LL
